/* Prevent clipping in auto-refresh dropdown */
#riskQuickTabs .qt-refresh{
  box-sizing:border-box;
  min-width: 140px;
  padding-left: 14px;
  padding-right: 28px; /* space for caret */
  line-height: 1.2;
  overflow: visible;
  text-indent: 0;
}

/* Show only Profit Log and Settings in the header */
.topbar .navicons #nav-prep,
.topbar .navicons #nav-trend,
.topbar .navicons #nav-risk { display:none !important; }

/* Scope quick-switch chips: show only inside #riskQuickTabs */
.qt-chip { display:none !important; }
#riskQuickTabs .qt-chip { display:inline-flex !important; }

/* Show only total on top chips */
.statstrip #chipAKWrap .muted,
.statstrip #chipBGWrap .muted,
.statstrip #chipAK,
.statstrip #chipBG { display:none !important; }
.statstrip #chipAKWrap .tag,
.statstrip #chipBGWrap .tag { margin-right:6px; padding:2px 6px; border-radius:9999px; background:#0002; font-weight:700; }

/* --- Quick Tabs polish --- */
#riskQuickTabs{
  display:flex; flex-wrap:wrap; align-items:center;
  gap:8px; padding:8px 10px; margin:10px 0 12px;
  background:rgba(255,255,255,0.02);
  border:1px solid var(--line);
  border-radius:12px;
}
#riskQuickTabs .tabbtn{
  --h:28px;
  height:var(--h);
  padding:0 12px;
  border-radius:9999px;
  border:1px solid transparent;
  background:#2a2a2f;
  color:var(--fg);
  font-weight:600; font-size:12.5px; letter-spacing:.02em;
  cursor:pointer; user-select:none;
  transition:background .15s ease, transform .06s ease, box-shadow .15s ease;
}
#riskQuickTabs .tabbtn:hover{ background:#34343a; }
#riskQuickTabs .tabbtn:active{ transform:translateY(1px); }
#riskQuickTabs .tabbtn.active{
  background:#7424ac;
  color:#0b0b10;
  box-shadow:0 0 0 2px rgba(120,70,255,.25);
}
#riskQuickTabs .qt-controls{ margin-left:auto; gap:8px; align-items:center; flex-wrap:nowrap }
#riskQuickTabs .qt-add input{ height:28px; border-radius:9999px; padding:0 10px }
#riskQuickTabs .qt-add button,
#riskQuickTabs .qt-clear,
#riskQuickTabs .qt-refresh{ height:28px; border-radius:9999px; padding:0 10px }

/* Clear-selected button: keep text on one line and align with controls */
#riskQuickTabs .qt-controls{display:flex;align-items:center;gap:8px;margin-left:auto;flex-wrap:nowrap}
#riskQuickTabs .qt-clear{
  display:inline-flex; align-items:center; justify-content:center;
  white-space:nowrap; writing-mode:horizontal-tb; text-orientation:mixed; letter-spacing:normal;
  padding:6px 12px; line-height:1; flex:0 0 auto; height:auto;
}

#riskQuickTabs .qt-clear{border-radius:8px;border:1px solid var(--line);background:#2a2a30;padding:6px 8px;cursor:pointer}
#riskQuickTabs .qt-controls{display:flex;align-items:center;gap:8px;margin-left:auto}

/* Candle slider: keep label fixed to the right */
#riskCandlesLabel{position:static !important;left:auto !important;top:auto !important;transform:none !important;margin-left:8px;white-space:nowrap}

/* Fix +Add layout */
#riskQuickTabs .qt-add{display:inline-flex;flex-direction:row;align-items:center;gap:6px}
#riskQuickTabs .qt-add button{writing-mode:horizontal-tb;text-orientation:mixed;transform:none;white-space:nowrap;letter-spacing:normal;padding:6px 10px}
#riskQuickTabs .qt-add input{min-width:64px}

/* Quick Tabs + controls */
#riskQuickTabs{display:flex;gap:10px;margin:8px 0 6px;flex-wrap:wrap;align-items:center}
#riskQuickTabs .tabbtn{border-radius:10px;border:1px solid var(--line);background:#26252b;padding:6px 10px;cursor:pointer;user-select:none}
#riskQuickTabs .tabbtn.active{background:#7424ac;color:#0b0b10;border-color:transparent;font-weight:600}
#riskQuickTabs .tabbtn[draggable="true"]{ -webkit-user-drag:element }
#riskQuickTabs .qt-controls{display:flex;align-items:center;gap:8px;margin-left:auto}
#riskQuickTabs .qt-add{display:inline-flex;gap:6px;align-items:center}
#riskQuickTabs .qt-add input{width:64px;background:#1f1f24;border:1px solid var(--line);border-radius:8px;padding:6px 8px;color:var(--fg);outline:none}
#riskQuickTabs .qt-add button{border-radius:8px;border:1px solid var(--line);background:#2a2a30;padding:6px 8px;cursor:pointer}
#riskQuickTabs .qt-refresh{background:#1f1f24;border:1px solid var(--line);border-radius:8px;padding:6px 8px;color:var(--fg)}

#riskQuickTabs{display:flex;gap:10px;margin:8px 0 2px;flex-wrap:wrap}

#multiSymbolTabs{display:flex !important; gap:10px; margin:8px 0 2px; flex-wrap:wrap;}

    :root {
      --bg:#1b191b; --panel:#2a292f; --panel-2:#242328; --line:#35343a;
      --fg:#f1f2f4; --muted:#a7adbb;
      --accent:#7424ac;           /* main purple */
      --accent-graph:#7c5cff;     /* bright line purple (added) */
      --ok:#6abd74; --bad:#e05d5d; --warn:#d3a54a; --pill:#24252b;
      --shadow:0 6px 18px rgba(0,0,0,.35); --radius:14px; --pad:16px;
    }
    html,body{background:var(--bg);color:var(--fg)}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;margin:0;line-height:1.35;word-break:break-word}
    a{color:inherit}

    /* Top bar */
    .topbar{position:sticky;top:0;z-index:50;display:flex;align-items:center;justify-content:space-between;background:linear-gradient(180deg,#201f25 0%,#1a191f 100%);border-bottom:1px solid var(--line);padding:10px 14px}
    .brand{display:flex;gap:10px;align-items:center;min-width:0}
    .brand .logo{width:36px;height:36px;display:grid;place-items:center;border-radius:10px;background:#2f2e36;border:1px solid var(--line);overflow:hidden;flex:0 0 auto}
    .brand h1{font-size:16px;margin:0;letter-spacing:.3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .navicons{display:flex;gap:10px;align-items:center}
    .iconbtn{min-width:44px;min-height:44px;display:grid;place-items:center;border-radius:12px;border:1px solid var(--line);background:#26252b;cursor:pointer;color:#cfd3dc}
    .iconbtn.active{background:#7424ac;color:#090909;border-color:transparent}

    /* Stat strip */
    .statstrip{display:flex;gap:10px;align-items:center;padding:10px 14px;flex-wrap:wrap;border-bottom:1px solid var(--line);background:#1e1d22}
    .chip{display:flex;gap:8px;align-items:center;padding:6px 10px;background:#2a2930;border:1px solid var(--line);border-radius:10px;font-size:12px}
    .chip.ok{background:#213224;color:var(--ok);border-color:#2a4930}
    .chip.warn{background:#332d1f;color:var(--warn);border-color:#5a4726}
    .chip.bad{background:#372325;color:var(--bad);border-color:#5d3439}

    /* Shell */
    .wrap{max-width:1100px;margin:0 auto;padding:14px}
    .card{background:var(--panel);border:1px solid var(--line);border-radius:var(--radius);padding:var(--pad);box-shadow:var(--shadow);margin:14px 0}
    .muted{color:var(--muted)}
    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .actions{display:flex;gap:10px;flex-wrap:wrap}
    button,select,input{font-size:15px}
    select,input{background:var(--panel-2);color:var(--fg);border:1px solid var(--line);border-radius:12px;padding:12px 12px;width:100%}
    button{padding:12px 16px;border-radius:12px;border:1px solid var(--line);background:var(--panel-2);color:var(--fg);cursor:pointer}
    .primary{background:#7424ac;color:#0b0b10;border-color:transparent;font-weight:600}
    .tabs{display:flex;gap:10px;margin:8px 0 2px;flex-wrap:wrap}
    .tabbtn{border-radius:10px;border:1px solid var(--line);background:#26252b;padding:8px 12px;cursor:pointer}
    .tabbtn.active{background:#7424ac;color:#0b0b10;border-color:transparent}
    .pill{display:inline-flex;gap:8px;align-items:center;padding:6px 12px;border-radius:999px;background:var(--pill);border:1px solid var(--line);font-size:13px;white-space:nowrap;line-height:1.1}
    .pill.accent{background:#7424ac;color:#0b0b10;border-color:transparent}
    .ok{color:var(--ok)} .warn{color:var(--warn)} .bad{color:var(--bad)}
    details summary{cursor:pointer}
    .bundles{display:flex;flex-wrap:wrap;gap:8px;margin-top:8px}
    .bundle{padding:6px 10px;border-radius:10px;border:1px solid var(--line);background:#26252b;font-size:14px;cursor:pointer}
    .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:900px){.grid{grid-template-columns:1fr}}

    /* Chart canvas */
    .chart{width:100%;height:190px;border-radius:10px;background:#24252b;margin-top:10px;display:block}
    .legend{display:flex;flex-wrap:wrap;gap:10px;align-items:center;margin-top:8px;font-size:12px;color:var(--muted)}
    .legend .item{display:inline-flex;gap:8px;align-items:center;padding:6px 10px;border-radius:10px;border:1px solid var(--line);background:#26252b}
    .swatch{display:inline-block;width:20px;height:10px;border-radius:2px}
    .swatch.line{width:28px;height:0;border-top:3px solid currentColor}
    .swatch.dashed{border-top-style:dashed}

    .seg{display:flex;gap:8px;flex-wrap:wrap}
    .segbtn{padding:8px 12px;border:1px solid var(--line);background:#26252b;border-radius:10px;cursor:pointer}
    .segbtn.active{background:#7424ac;color:#0b0b10;border-color:transparent}
    .spinner{display:inline-block;width:18px;height:18px;border:3px solid #45434c;border-top-color:#ddd;border-radius:50%;animation:spin 1s linear infinite;vertical-align:-3px}
    @keyframes spin{to{transform:rotate(360deg)}}
    .flash{animation:flash .6s ease}@keyframes flash{0%{color:var(--ok)}100%{color:var(--muted)}}
    .sliderrow{display:flex;align-items:center;gap:10px;position:relative}
    .sliderrow input[type=range]{width:200px}
    /* Position the candles label over the slider knob.  We use absolute
       positioning so the pill follows the knob as the user moves the
       slider.  The JS below computes the left offset based on the
       current slider value. */
    #riskCandlesLabel{white-space:nowrap;
  position:absolute;
  top:-26px;
  transform:translateX(-50%);
  pointer-events:none;
}

   /* Mobile tweaks */
@media (max-width:520px){
  .brand h1{font-size:14px}
  .chip{font-size:11px}
  .tabbtn,button{padding:10px 12px}
  .legend{font-size:11px}

  .statstrip{overflow-x:auto;flex-wrap:nowrap}
  .statstrip::-webkit-scrollbar{display:none}
  .chip{flex:0 0 auto}
  .navicons{gap:8px}

  /* Make pills smaller on mobile (optional: keep this scoped only to Risk) */
  #riskAdvice .pill,
  #riskSummary .pill {
    font-size: 11px;       /* desktop is 13px */
    padding: 4px 8px;
    max-width: 100%;
    box-sizing: border-box;

    /* Let pills wrap instead of overflowing on small screens */
    white-space: normal;    /* overrides base .pill nowrap */
    word-break: break-word; /* split long tickers/words if needed */
    display: block;         /* occupy full line for nicer wrapping */
    line-height: 1.2;
  }
}

    /* Marquee / auto-scroll helpers */
    .autoscroll{display:block; overflow:hidden; max-width:100%; box-sizing:border-box; border-radius:999px;}
    @media (max-width:520px){
      .autoscroll .track{display:inline-block; white-space:nowrap; will-change:transform; animation:marquee var(--dur,12s) linear infinite;}
    }
    @keyframes marquee{0%{transform:translateX(0)}100%{transform:translateX(-50%)}}

  
/* === Glass active look for bell === */
.iconbtn#nav-bell.active{
  color: #fff !important;
  background: radial-gradient(120% 120% at 50% -10%, rgba(116,36,172,0.30) 0%, rgba(116,36,172,0.10) 45%, rgba(0,0,0,0.0) 60%),
              linear-gradient(180deg, rgba(116,36,172,0.22) 0%, rgba(116,36,172,0.10) 100%);
  border: 1px solid rgba(116,36,172,0.70);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.35),
    0 6px 18px rgba(116,36,172,0.35);
}
.iconbtn#nav-bell.active i{ color:#fff !important; }

/* PnL radio buttons (AK/BG): use brand purple instead of default blue */
#panel-pnl input[type="radio"]{ accent-color:#7424ac; }
#panel-pnl input[type="radio"]:focus{ outline:none; box-shadow:0 0 0 3px rgba(116,36,172,0.25); }



/* === Statstrip size alignment, keep DOM unchanged === */
.statstrip #chipAKWrap,
.statstrip #chipBGWrap{
  padding: 6px 10px;
  border-radius: 10px;
  font-size: 12px;
  line-height: 1;
  min-height: 28px;
}

/* Flatten the inner ALL pill so it doesn't bloat the chip */
.statstrip #chipAKAllWrap,
.statstrip #chipBGAllWrap{
  display: inline-flex;
  align-items: center;
  padding: 0;
  margin-left: 6px;        /* small separation from today value */
  background: transparent;
  border: 0;
  font-size: 12px;
  line-height: 1;
  box-shadow: none;
}

/* Optional: tighten the muted label to stay on one line */
.statstrip #chipAKWrap .muted,
.statstrip #chipBGWrap .muted{
  white-space: nowrap;
}

/* --- Final polish: make AK/BG chips visually mirror status chips --- */
.statstrip #chipAKWrap,
.statstrip #chipBGWrap{
  padding: 6px 10px;     /* identical to status chips */
  border-radius: 10px;   /* identical radius */
  font-size: 12px;       /* identical text size */
  line-height: 1;        /* match compact line-height */
  min-height: 28px;      /* ensure same height */
  display: inline-flex;  /* consistent layout */
  align-items: center;
}

/* Make the number styling consistent (API/Data use ~600 weight) */
.statstrip #chipAKWrap strong,
.statstrip #chipBGWrap strong{
  font-weight: 600;
  letter-spacing: .02em;
}

/* Keep only the total visible; hide any secondary label/today number */
.statstrip #chipAKWrap .muted,
.statstrip #chipBGWrap .muted,
.statstrip #chipAK,
.statstrip #chipBG { display: none !important; }

/* Add AK/BG labels back via pseudo-elements (no DOM change) */
.statstrip #chipAKWrap::before{ content:'AK'; font-weight:600; margin-right:8px; opacity:.9; }
.statstrip #chipBGWrap::before{ content:'BG'; font-weight:600; margin-right:8px; opacity:.9; }

/* --- Force AK/BG chip height to match status chips (~30px) --- */
.statstrip #chipAKWrap,
.statstrip #chipBGWrap{
  display: inline-flex;
  align-items: center;
  height: 30px;          /* fixed height to mirror API/Data */
  padding: 0 10px;       /* identical padding pattern */
  border-radius: 10px;
  font-size: 12px;
  line-height: 1;
}

/* Flatten any inner 'pill' blocks inside AK/BG so they don't add height */
.statstrip #chipAKWrap .pill,
.statstrip #chipBGWrap .pill{
  padding: 0 !important;
  margin: 0 !important;
  background: transparent !important;
  border: 0 !important;
  box-shadow: none !important;
  height: auto !important;
  line-height: 1 !important;
}

/* Tighten the number style */
.statstrip #chipAKWrap strong,
.statstrip #chipBGWrap strong{
  font-weight: 600;
  letter-spacing: .02em;
}

/* Spacing for the pseudo label */
.statstrip #chipAKWrap::before,
.statstrip #chipBGWrap::before{ margin-right: 8px; }

/* ================= Quick Tabs (appearance-only polish) ================= */
#riskQuickTabs.card{
  background: rgba(255,255,255,0.03);           /* subtle glass */
  border: 1px solid #2a2c33;                    /* match other cards */
  border-radius: 12px;
  padding: 10px;
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02),
              0 8px 24px rgba(0,0,0,0.12);       /* soft depth */
}

/* Chips row */
#riskQuickTabs .tabbtn{
  display: inline-flex;
  align-items: center;
  height: 30px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid #2a2c33;
  background: #1c1e24;
  color: #cfd3da;
  font-size: 12px;
  letter-spacing: .02em;
  user-select: none;
  transition: background .15s ease, border-color .15s ease, color .15s ease, box-shadow .15s ease;
  margin-right: 6px;
}
#riskQuickTabs .tabbtn:hover{ background:#21252b; border-color:#323542; }
#riskQuickTabs .tabbtn:active{ background:#262a31; }
#riskQuickTabs .tabbtn.active{
  background: rgba(124,92,255,0.15);            /* align with accent graph */
  border-color: rgba(124,92,255,0.45);
  color: #e7e5ff;
  box-shadow: 0 0 0 2px rgba(124,92,255,0.25) inset;
}

/* Controls strip (SYM / + Add / Clear / Refresh) */
#riskQuickTabs .qt-controls{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  margin-left: auto;
}
#riskQuickTabs .qt-add input{
  height: 30px;
  padding: 0 10px;
  width: 80px;
  border-radius: 10px;
  border: 1px solid #2a2c33;
  background: #13151a;
  color: #e1e5ec;
  letter-spacing: .04em;
  text-transform: uppercase;
}
#riskQuickTabs .qt-add input::placeholder{ color:#6b7280; }
#riskQuickTabs .qt-add button,
#riskQuickTabs .qt-clear{
  height: 30px;
  padding: 0 10px;
  border-radius: 10px;
  border: 1px solid #2a2c33;
  background: #1c1e24;
  color: #cfd3da;
  font-size: 12px;
}
#riskQuickTabs .qt-add button:hover,
#riskQuickTabs .qt-clear:hover{ background:#21252b; border-color:#323542; }

#riskQuickTabs .qt-refresh{
  height: 30px;
  padding: 0 28px 0 10px;  /* room for caret */
  border-radius: 10px;
  border: 1px solid #2a2c33;
  background: #1c1e24;
  color: #cfd3da;
  font-size: 12px;
  appearance: none;
  background-image: linear-gradient(45deg, transparent 50%, #7c5cff 50%),
                    linear-gradient(135deg, #7c5cff 50%, transparent 50%);
  background-position: right 10px center, right 6px center;
  background-size: 6px 6px, 6px 6px;
  background-repeat: no-repeat;
}

/* Keep spacing consistent across the whole row */
#riskQuickTabs .tabbtn, 
#riskQuickTabs .qt-controls > *{ vertical-align: middle; }

/* ===== Global “glass” shadow for buttons (appearance only) ===== */
button,
.btn,
[role="button"],
input[type="button"],
input[type="submit"],
.tabbtn,
.segbtn {
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.03),
    0 8px 24px rgba(0,0,0,0.12);
  transition: box-shadow .18s ease, transform .18s ease;
}

button:hover,
.btn:hover,
[role="button"]:hover,
input[type="button"]:hover,
input[type="submit"]:hover,
.tabbtn:hover,
.segbtn:hover {
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.04),
    0 10px 28px rgba(0,0,0,0.18);
}

button:active,
.btn:active,
[role="button"]:active,
input[type="button"]:active,
input[type="submit"]:active,
.tabbtn:active,
.segbtn:active {
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.02),
    0 6px 16px rgba(0,0,0,0.16);
  transform: translateY(0.5px);
}

/* Don’t over-emphasize disabled buttons */
button:disabled,
.btn:disabled,
[role="button"][aria-disabled="true"],
input[type="button"]:disabled,
input[type="submit"]:disabled {
  box-shadow: inset 0 1px 0 rgba(255,255,255,0.02), 0 0 0 rgba(0,0,0,0);
  transform: none;
}

/* === Turn purple primary buttons to black so glass shadow shows === */
button.primary,
.btn.primary,
[role="button"].primary {
  background: #0f1116 !important;      /* deep black */
  border: 1px solid #2a2c33 !important;
  color: #e4e7ee !important;
}
button.primary:hover,
.btn.primary:hover,
[role="button"].primary:hover {
  background: #14171d !important;
  border-color: #323542 !important;
}
button.primary:active,
.btn.primary:active,
[role="button"].primary:active {
  background: #0c0e12 !important;
}
/* keep icon tint readable */
button.primary i,
.btn.primary i,
[role="button"].primary i { color: inherit !important; opacity: .95; }

/* === Amplified glass-press effect for ALL buttons === */
button,
.btn,
[role="button"],
input[type="button"],
input[type="submit"],
.tabbtn,
.segbtn {
  position: relative;
  z-index: 0;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.03),
    0 8px 24px rgba(0,0,0,0.12);
  transition: box-shadow .18s ease, transform .18s ease, background .18s ease, color .18s ease;
  overflow: hidden; /* so the glossy overlay respects rounded corners */
}

button:hover,
.btn:hover,
[role="button"]:hover,
input[type="button"]:hover,
input[type="submit"]:hover,
.tabbtn:hover,
.segbtn:hover {
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.05),
    0 10px 28px rgba(0,0,0,0.20);
}

/* Focus/active: stronger inner glass + glow ring; use !important to win specificity */
button:active, .btn:active, [role="button"]:active,
input[type="button"]:active, input[type="submit"]:active,
.tabbtn:active, .segbtn:active,
button:focus-visible, .btn:focus-visible, [role="button"]:focus-visible,
input[type="button"]:focus-visible, input[type="submit"]:focus-visible,
.tabbtn:focus-visible, .segbtn:focus-visible {
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    0 12px 32px rgba(0,0,0,0.36),
    0 0 0 2px rgba(124,92,255,0.45) inset !important;
  transform: translateY(0.5px);
}

/* Glossy overlay that appears on hover/press */
button::before, .btn::before, [role="button"]::before,
input[type="button"]::before, input[type="submit"]::before,
.tabbtn::before, .segbtn::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background:
    radial-gradient(120% 60% at 50% -10%, rgba(255,255,255,0.10), rgba(255,255,255,0) 60%);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
}
button:hover::before, .btn:hover::before, [role="button"]:hover::before,
input[type="button"]:hover::before, input[type="submit"]:hover::before,
.tabbtn:hover::before, .segbtn:hover::before { opacity: .18; }
button:active::before, .btn:active::before, [role="button"]:active::before,
input[type="button"]:active::before, input[type="submit"]:active::before,
.tabbtn:active::before, .segbtn:active::before { opacity: .35; }

/* Ensure purple primary buttons are black so shadow shows (keeps your prior change) */
button.primary, .btn.primary, [role="button"].primary {
  background: #0f1116 !important;
  border: 1px solid #2a2c33 !important;
  color: #e4e7ee !important;
}
button.primary:hover, .btn.primary:hover, [role="button"].primary:hover {
  background: #14171d !important;
  border-color: #323542 !important;
}
button.primary:active, .btn.primary:active, [role="button"].primary:active {
  background: #0c0e12 !important;
}
button.primary i, .btn.primary i, [role="button"].primary i { color: inherit !important; opacity: .95; }

/* ===== Replace purple accent with black across UI (no JS/HTML changes) ===== */

/* 1) Core accent vars to black */
:root{
  --accent: #0f1116 !important;        /* primary accent surface (was purple) */
  --accent-graph: #0f1116 !important;  /* bright line accent (charts/pills) */
}

/* 2) Accent-styled pills/buttons */
.pill.accent{
  background: #0f1116 !important;
  border: 1px solid #2a2c33 !important;
  color: #e6e9f0 !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.03),
    0 8px 24px rgba(0,0,0,.12) !important;
}

/* 3) Quick Tabs active chip (used to be purple) */
#riskQuickTabs .tabbtn.active{
  background: #0f1116 !important;
  border-color: #2a2c33 !important;
  color: #e7eaf2 !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.04),
    0 10px 28px rgba(0,0,0,.20) !important;
}

/* 4) Dropdown caret that used purple triangles */
#riskQuickTabs .qt-refresh{
  background-image:
    linear-gradient(45deg, transparent 50%, #000 50%),
    linear-gradient(135deg, #000 50%, transparent 50%) !important;
}

/* 5) Focus/active ring used purple—make it deep black */
button:active, .btn:active, [role="button"]:active,
input[type="button"]:active, input[type="submit"]:active,
.tabbtn:active, .segbtn:active,
button:focus-visible, .btn:focus-visible, [role="button"]:focus-visible,
input[type="button"]:focus-visible, input[type="submit"]:focus-visible,
.tabbtn:focus-visible, .segbtn:focus-visible {
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    0 12px 32px rgba(0,0,0,0.36),
    0 0 0 2px rgba(0,0,0,0.55) inset !important;
}

/* 6) Any chips/pills that relied on --accent directly */
.chip.accent, .tag.accent, .btn.accent, .segbtn.accent {
  background: #0f1116 !important;
  border-color: #2a2c33 !important;
  color: #e6e9f0 !important;
}

/* ===== Glass look on click (replace solid black with translucent glass) ===== */
:root{
  --glass-bg: rgba(15,17,22,.48);
  --glass-bg-hover: rgba(15,17,22,.58);
  --glass-bg-active: rgba(12,14,18,.64);
  --glass-border: #2a2c33;
}

/* Core interactive surfaces (no change to green/red ok/bad/warn pills) */
button,
.btn,
[role="button"],
input[type="button"],
input[type="submit"],
.tabbtn,
.segbtn {
  background: var(--glass-bg) !important;
  border: 1px solid var(--glass-border) !important;
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
}
button:hover, .btn:hover, [role="button"]:hover,
input[type="button"]:hover, input[type="submit"]:hover,
.tabbtn:hover, .segbtn:hover {
  background: var(--glass-bg-hover) !important;
}
button:active, .btn:active, [role="button"]:active,
input[type="button"]:active, input[type="submit"]:active,
.tabbtn:active, .segbtn:active,
button:focus-visible, .btn:focus-visible, [role="button"]:focus-visible,
input[type="button"]:focus-visible, input[type="submit"]:focus-visible,
.tabbtn:focus-visible, .segbtn:focus-visible {
  background: var(--glass-bg-active) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    0 12px 32px rgba(0,0,0,0.36),
    0 0 0 2px rgba(255,255,255,0.06) inset !important;
}

/* Accent variants that used purple: make them glass, not opaque */
.pill.accent,
.chip.accent,
.btn.accent,
.segbtn.accent,
#riskQuickTabs .tabbtn.active,
button.primary, .btn.primary, [role="button"].primary {
  background: var(--glass-bg) !important;
  border: 1px solid var(--glass-border) !important;
  color: #e6e9f0 !important;
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
}
.pill.accent:hover,
.chip.accent:hover,
.btn.accent:hover,
.segbtn.accent:hover,
#riskQuickTabs .tabbtn.active:hover,
button.primary:hover, .btn.primary:hover, [role="button"].primary:hover {
  background: var(--glass-bg-hover) !important;
}
.pill.accent:active,
.chip.accent:active,
.btn.accent:active,
.segbtn.accent:active,
#riskQuickTabs .tabbtn.active:active,
button.primary:active, .btn.primary:active, [role="button"].primary:active {
  background: var(--glass-bg-active) !important;
}

/* Keep the glossy overlay from previous build */
button::before, .btn::before, [role="button"]::before,
input[type="button"]::before, input[type="submit"]::before,
.tabbtn::before, .segbtn::before {
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(120% 60% at 50% -10%, rgba(255,255,255,0.12), rgba(255,255,255,0) 60%);
  opacity: 0;
  pointer-events: none;
  transition: opacity .18s ease;
}
button:hover::before, .btn:hover::before, [role="button"]:hover::before,
input[type="button"]:hover::before, input[type="submit"]:hover::before,
.tabbtn:hover::before, .segbtn:hover::before { opacity: .18; }
button:active::before, .btn:active::before, [role="button"]:active::before,
input[type="button"]:active::before, input[type="submit"]:active::before,
.tabbtn:active::before, .segbtn:active::before { opacity: .32; }

/* === Improve readability: bright text on all buttons + glass selected state === */
:root{ --btn-fg: #eef2f9; }

/* Baseline for all interactive button-like controls */
button,
.btn,
[role="button"],
input[type="button"],
input[type="submit"],
.tabbtn,
.segbtn {
  color: var(--btn-fg) !important;                    /* strong readable text */
  text-shadow: 0 1px 0 rgba(0,0,0,0.25);              /* subtle lift on glass */
}

/* Selected/pressed state stays glass and readable */
.btn.active, button.active, [role="button"].active,
.tabbtn.active,
.segbtn.active,
[aria-pressed="true"],
.segbtn[aria-pressed="true"] {
  background: var(--glass-bg-active) !important;
  color: var(--btn-fg) !important;
  border-color: #373a44 !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    0 12px 32px rgba(0,0,0,0.36),
    0 0 0 2px rgba(255,255,255,0.06) inset !important;
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
}

/* Segmented controls often have .segbtn; ensure inactive still readable */
.segbtn { color: var(--btn-fg) !important; }
.segbtn:hover { color: var(--btn-fg) !important; }

/* Quick tabs: ensure active/inactive both readable and glassy */
#riskQuickTabs .tabbtn { color: var(--btn-fg) !important; }
#riskQuickTabs .tabbtn.active {
  background: var(--glass-bg-active) !important;
  color: var(--btn-fg) !important;
  border-color: #373a44 !important;
}

/* Selects in controls row (refresh select) */
#riskQuickTabs .qt-refresh {
  color: var(--btn-fg) !important;
}

/* Inputs in add-control */
#riskQuickTabs .qt-add input { color: #f2f5ff !important; }
#riskQuickTabs .qt-add input::placeholder { color: #b5bcc9 !important; }

/* === Purple-tinted glass accents (#7424ac) for selected/pressed states === */
:root{
  --accent-purple: #7424ac;
  --accent-film: rgba(116, 36, 172, 0.22);
  --accent-film-hover: rgba(116, 36, 172, 0.28);
  --accent-film-strong: rgba(116, 36, 172, 0.32);
  --accent-ring: rgba(116, 36, 172, 0.55);
}

/* Any accent pill/chip uses a purple glass film */
.pill.accent,
.chip.accent,
.btn.accent,
.segbtn.accent {
  background: linear-gradient(0deg, var(--accent-film), var(--accent-film)), var(--glass-bg) !important;
  border: 1px solid rgba(116,36,172,0.45) !important;
  color: var(--btn-fg) !important;
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
}
.pill.accent:hover,
.chip.accent:hover,
.btn.accent:hover,
.segbtn.accent:hover {
  background: linear-gradient(0deg, var(--accent-film-hover), var(--accent-film-hover)), var(--glass-bg-hover) !important;
}

/* Selected/pressed buttons/chips get the purple glass + ring */
.btn.active, button.active, [role="button"].active,
.tabbtn.active,
.segbtn.active,
[aria-pressed="true"],
.segbtn[aria-pressed="true"],
#riskQuickTabs .tabbtn.active {
  background: linear-gradient(0deg, var(--accent-film), var(--accent-film)), var(--glass-bg-active) !important;
  color: var(--btn-fg) !important;
  border-color: rgba(116,36,172,0.45) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    0 12px 32px rgba(0,0,0,0.36),
    0 0 0 2px var(--accent-ring) inset !important;
}

/* Hovered active keeps stronger film */
.btn.active:hover, button.active:hover, [role="button"].active:hover,
.tabbtn.active:hover,
.segbtn.active:hover,
[aria-pressed="true"]:hover,
#riskQuickTabs .tabbtn.active:hover {
  background: linear-gradient(0deg, var(--accent-film-strong), var(--accent-film-strong)), var(--glass-bg-active) !important;
}

/* Keep the glossy overlay tint subtly purple when pressed */
button:active::before, .btn:active::before, [role="button"]:active::before,
input[type="button"]:active::before, input[type="submit"]:active::before,
.tabbtn:active::before, .segbtn:active::before {
  background:
    radial-gradient(120% 60% at 50% -10%, rgba(255,255,255,0.14), rgba(255,255,255,0) 60%),
    radial-gradient(90% 40% at 50% 0%, rgba(116,36,172,0.10), rgba(116,36,172,0) 60%);
  opacity: .34;
}

/* ========= Header nav buttons: glass baseline + purple active ========= */
:root{
  --btn-fg: #eef2f9;
  --glass-bg: rgba(15,17,22,.48);
  --glass-bg-hover: rgba(15,17,22,.58);
  --glass-bg-active: rgba(12,14,18,.64);
  --glass-border: #2a2c33;
  --accent-purple: #7424ac;
  --accent-film: rgba(116, 36, 172, 0.22);
  --accent-film-hover: rgba(116, 36, 172, 0.28);
  --accent-ring: rgba(116, 36, 172, 0.55);
}

/* Make sure header nav buttons look like our glass buttons */
#nav-prep, #nav-trend, #nav-risk, #nav-settings, #nav-pnl{
  display:inline-flex;
  align-items:center;
  gap:8px;
  height:32px;
  padding:0 12px;
  border-radius:12px;
  border:1px solid var(--glass-border);
  background: var(--glass-bg);
  color: var(--btn-fg);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.03),
    0 8px 24px rgba(0,0,0,.12);
  transition: background .18s ease, box-shadow .18s ease, transform .18s ease, border-color .18s ease, color .18s ease;
}
#nav-prep:hover, #nav-trend:hover, #nav-risk:hover, #nav-settings:hover, #nav-pnl:hover{
  background: var(--glass-bg-hover);
}
#nav-prep:active, #nav-trend:active, #nav-risk:active, #nav-settings:active, #nav-pnl:active{
  transform: translateY(0.5px);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 10px 28px rgba(0,0,0,.20);
}
/* Active (selected) nav = purple-tinted glass */
#nav-prep.active, #nav-trend.active, #nav-risk.active, #nav-settings.active, #nav-pnl.active,
#nav-prep[aria-pressed="true"], #nav-trend[aria-pressed="true"], #nav-risk[aria-pressed="true"], #nav-settings[aria-pressed="true"], #nav-pnl[aria-pressed="true"]{
  background: linear-gradient(0deg, var(--accent-film), var(--accent-film)), var(--glass-bg-active) !important;
  border-color: rgba(116,36,172,0.45) !important;
  color: var(--btn-fg) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.08),
    0 12px 32px rgba(0,0,0,.36),
    0 0 0 2px var(--accent-ring) inset;
}

/* ========= Settings buttons: make Save / Test / Log match ========= */
#saveKeys, #testFetch, #logPnl{
  display:inline-flex;
  align-items:center;
  height:30px;
  padding:0 10px;
  border-radius:10px;
  border:1px solid var(--glass-border);
  background: var(--glass-bg);
  color: var(--btn-fg);
  font-size:12px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.03),
    0 8px 24px rgba(0,0,0,.12);
  transition: background .18s ease, box-shadow .18s ease, transform .18s ease, border-color .18s ease;
}
#saveKeys:hover, #testFetch:hover, #logPnl:hover{
  background: var(--glass-bg-hover);
}
#saveKeys:active, #testFetch:active, #logPnl:active{
  transform: translateY(0.5px);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 10px 28px rgba(0,0,0,.20);
}

/* If any of these are toggled as active, give purple-tinted glass */
#saveKeys.active, #testFetch.active, #logPnl.active,
#saveKeys[aria-pressed="true"], #testFetch[aria-pressed="true"], #logPnl[aria-pressed="true"]{
  background: linear-gradient(0deg, var(--accent-film), var(--accent-film)), var(--glass-bg-active);
  border-color: rgba(116,36,172,0.45);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.08),
    0 12px 32px rgba(0,0,0,.36),
    0 0 0 2px var(--accent-ring) inset;
}

/* Make icons (if any) inherit */
#saveKeys i, #testFetch i, #logPnl i,
#nav-prep i, #nav-trend i, #nav-risk i, #nav-settings i, #nav-pnl i{
  color: inherit;
  opacity: .95;
}

/* ================== Refined interaction model ================== */
/* Goal:
   - Momentary buttons (e.g., Market bundles, Save/Test/Log) = GLASS baseline always; go slightly darker while pressed.
   - Toggle buttons (Analyze, Header Nav, Quick Tabs, Timeframe seg buttons) = BLACK baseline; show PURPLE-GLASS only when selected (.active / aria-pressed="true").
*/

:root{
  --btn-fg: #eef2f9;
  --glass-bg: rgba(15,17,22,.48);
  --glass-bg-hover: rgba(15,17,22,.58);
  --glass-bg-active: rgba(12,14,18,.64);
  --glass-border: #2a2c33;
  --accent-purple: #7424ac;
  --accent-film: rgba(116, 36, 172, 0.22);
  --accent-film-hover: rgba(116, 36, 172, 0.28);
  --accent-ring: rgba(116, 36, 172, 0.55);
  --black-base: #0f1116;
  --black-base-hover: #14171d;
  --black-base-active: #0c0e12;
}

/* ---------- Momentary controls: glass baseline ---------- */
.bundle[data-bundle],
#saveKeys, #testFetch, #logPnl,
input[type="button"], input[type="submit"]{
  display:inline-flex; align-items:center;
  background: var(--glass-bg) !important;
  border: 1px solid var(--glass-border) !important;
  color: var(--btn-fg) !important;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.03), 0 8px 24px rgba(0,0,0,.12);
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
  transition: background .18s ease, box-shadow .18s ease, transform .18s ease, border-color .18s ease, color .18s ease;
}
.bundle[data-bundle]:hover,
#saveKeys:hover, #testFetch:hover, #logPnl:hover,
input[type="button"]:hover, input[type="submit"]:hover{
  background: var(--glass-bg-hover) !important;
}
.bundle[data-bundle]:active,
#saveKeys:active, #testFetch:active, #logPnl:active,
input[type="button"]:active, input[type="submit"]:active{
  background: var(--glass-bg-active) !important;
  transform: translateY(0.5px);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.06), 0 10px 28px rgba(0,0,0,.20);
}

/* ---------- Toggle groups: BLACK baseline when not active ---------- */
#start, #runTrend, #runRisk,                 /* Analyze buttons */
#nav-prep, #nav-trend, #nav-risk, #nav-settings, #nav-pnl,  /* Header nav */
#riskQuickTabs .tabbtn,                      /* Quick Tabs chips */
.segbtn{                                     /* Timeframe buttons */
  background: var(--black-base) !important;
  border: 1px solid var(--glass-border) !important;
  color: var(--btn-fg) !important;
  box-shadow: inset 0 1px 0 rgba(255,255,255,.03), 0 8px 24px rgba(0,0,0,.12);
  transition: background .18s ease, box-shadow .18s ease, transform .18s ease, border-color .18s ease, color .18s ease;
}
#start:hover, #runTrend:hover, #runRisk:hover,
#nav-prep:hover, #nav-trend:hover, #nav-risk:hover, #nav-settings:hover, #nav-pnl:hover,
#riskQuickTabs .tabbtn:hover,
.segbtn:hover{
  background: var(--black-base-hover) !important;
}
#start:active, #runTrend:active, #runRisk:active,
#nav-prep:active, #nav-trend:active, #nav-risk:active, #nav-settings:active, #nav-pnl:active,
#riskQuickTabs .tabbtn:active,
.segbtn:active{
  background: var(--black-base-active) !important;
  transform: translateY(0.5px);
}

/* Selected state = PURPLE GLASS */
#start.active, #runTrend.active, #runRisk.active,
#nav-prep.active, #nav-trend.active, #nav-risk.active, #nav-settings.active, #nav-pnl.active,
#riskQuickTabs .tabbtn.active,
.segbtn.active,
#start[aria-pressed="true"], #runTrend[aria-pressed="true"], #runRisk[aria-pressed="true"],
#nav-prep[aria-pressed="true"], #nav-trend[aria-pressed="true"], #nav-risk[aria-pressed="true"], #nav-settings[aria-pressed="true"], #nav-pnl[aria-pressed="true"]{
  background: linear-gradient(0deg, var(--accent-film), var(--accent-film)), var(--glass-bg-active) !important;
  border-color: rgba(116,36,172,0.45) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    0 12px 32px rgba(0,0,0,0.36),
    0 0 0 2px var(--accent-ring) inset !important;
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
}

/* ---------- Neutralize previous ".clicked" persistence (momentary buttons shouldn't stick) ---------- */
button.clicked:not(.active), .btn.clicked:not(.active), [role="button"].clicked:not(.active),
.tabbtn.clicked:not(.active), .segbtn.clicked:not(.active),
input[type="button"].clicked:not(.active), input[type="submit"].clicked:not(.active){
  /* revert to baseline (black for toggles, glass for momentary) */
  box-shadow: inherit !important;
  backdrop-filter: inherit !important;
  -webkit-backdrop-filter: inherit !important;
}

/* ---------- Keep bright readable text everywhere ---------- */
button, .btn, [role="button"], .tabbtn, .segbtn,
#saveKeys, #testFetch, #logPnl{
  color: var(--btn-fg) !important;
  text-shadow: 0 1px 0 rgba(0,0,0,0.25);
}

/* ===== Header nav icon alignment polish ===== */
/* Make the header buttons perfectly center their icons, with consistent sizing */
#nav-prep, #nav-trend, #nav-risk, #nav-settings, #nav-pnl{
  display: inline-flex;
  align-items: center;
  justify-content: center;      /* centers single-icon buttons */
  gap: 8px;                     /* keeps space if text exists */
  height: 32px;
  min-width: 40px;              /* avoids over-tight icon boxes */
  padding: 0 12px;
  line-height: 1;               /* removes baseline drift */
}

/* Normalize any icon inside these buttons (Font Awesome <i>, inline SVG, etc.) */
#nav-prep i, #nav-trend i, #nav-risk i, #nav-settings i, #nav-pnl i,
#nav-prep svg, #nav-trend svg, #nav-risk svg, #nav-settings svg, #nav-pnl svg{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 16px;
  height: 16px;
  font-size: 16px;              /* FA icons */
  line-height: 1;               /* prevent vertical offset */
  vertical-align: middle;
  margin: 0;                    /* kill inherited margins */
  transform: translateY(0);     /* reset any inherited shifts */
}

/* If an icon-only button gets too wide due to accidental whitespace, tighten it */
#nav-prep:has(i):not(:has(span,small)),
#nav-trend:has(i):not(:has(span,small)),
#nav-risk:has(i):not(:has(span,small)),
#nav-settings:has(i):not(:has(span,small)),
#nav-pnl:has(i):not(:has(span,small)){
  padding-left: 10px;
  padding-right: 10px;
  min-width: 36px;
}

/* Ensure icon inherits readable color from the button */
#nav-prep i, #nav-trend i, #nav-risk i, #nav-settings i, #nav-pnl i{ color: inherit; opacity: .95; }

/* ===== Glass styling for the Futures/markets select ===== */
:root{
  --btn-fg: #eef2f9;
  --glass-bg: rgba(15,17,22,.48);
  --glass-bg-hover: rgba(15,17,22,.58);
  --glass-bg-active: rgba(12,14,18,.64);
  --glass-border: #2a2c33;
  --accent-purple: #7424ac;
  --accent-film: rgba(116,36,172,.22);
  --accent-ring: rgba(116,36,172,.55);
}

/* The listbox itself */
#futures{
  background: var(--glass-bg) !important;
  color: var(--btn-fg) !important;
  border: 1px solid var(--glass-border) !important;
  border-radius: 12px !important;
  padding: 8px 10px !important;
  outline: none !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.03),
    0 8px 24px rgba(0,0,0,.12);
  backdrop-filter: saturate(120%) blur(6px);
  -webkit-backdrop-filter: saturate(120%) blur(6px);
}
#futures:focus{
  background: var(--glass-bg-hover) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,.06),
    0 10px 28px rgba(0,0,0,.20),
    0 0 0 2px var(--accent-ring) inset;
  border-color: rgba(116,36,172,.45) !important;
}

/* Options: base + selected */
#futures option{
  background: rgba(15,17,22,.85);
  color: var(--btn-fg);
  padding: 4px 6px;
}
#futures option:checked{
  background:
    linear-gradient(0deg, var(--accent-film), var(--accent-film)),
    rgba(15,17,22,.9) !important;
  color: #ffffff;
}

/* (Optional) nicer scrollbars for WebKit/Blink */
#futures::-webkit-scrollbar{ width: 10px; }
#futures::-webkit-scrollbar-track{ background: rgba(0,0,0,.25); border-radius: 8px; }
#futures::-webkit-scrollbar-thumb{
  background: rgba(255,255,255,.08);
  border: 1px solid var(--glass-border);
  border-radius: 8px;
}
#futures::-webkit-scrollbar-thumb:hover{ background: rgba(255,255,255,.12); }

/* ===== Mobile-safe layout for Quick Tabs refresh select ===== */
/* Allow the select's native dropdown to render without being clipped */
#riskQuickTabs.card { overflow: visible; }

/* Controls row can wrap on narrow screens */
#riskQuickTabs .qt-controls {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
}

/* Keep the refresh select within the viewport width */
#riskQuickTabs .qt-refresh {
  min-width: 120px;
  max-width: min(45vw, 180px);
  width: auto;
}

/* Phone tweaks */
@media (max-width: 520px) {
  #riskQuickTabs .qt-controls { justify-content: flex-end; }
  #riskQuickTabs .qt-refresh { order: 3; } /* optional: push to end of row */
}

#explainCard .modal-head{display:flex;align-items:center;gap:10px;margin-bottom:8px;}
#explainCard .modal-head .icon{width:30px;height:30px;border-radius:8px;display:grid;place-items:center;background:linear-gradient(180deg,rgba(116,36,172,.25),rgba(116,36,172,.08));border:1px solid rgba(116,36,172,.6);box-shadow:inset 0 1px 0 rgba(255,255,255,.06);}
#explainCard .modal-head .icon i{color:#fff;}
#explainCard .modal-head .title{font-weight:700;letter-spacing:.2px;color:#fff;}
#explainBody .row{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 0;}
#explainBody .row + .row{border-top:1px solid #2d2c33;}
#explainBody .left{display:flex;align-items:center;gap:10px;color:#e8e8ee;}
#explainBody .left i{color:#b18ad3;}
#explainBody .hint{color:#a6a6b3;font-size:12px;margin-top:6px;}
#explainBody .actions{display:flex;gap:10px;margin-top:12px;}
#explainBody .btn{padding:8px 12px;border-radius:10px;cursor:pointer;user-select:none;background:linear-gradient(180deg,rgba(116,36,172,.22),rgba(116,36,172,.10));border:1px solid rgba(116,36,172,.70);color:#fff;box-shadow:inset 0 1px 0 rgba(255,255,255,.06),inset 0 -1px 0 rgba(0,0,0,.35),0 6px 18px rgba(116,36,172,.35);}
#explainBody .btn:hover{filter:brightness(1.05);}
#explainBody .btn.secondary{background:#1b1b22;border-color:#32323a;box-shadow:inset 0 1px 0 rgba(255,255,255,.04);color:#e9e9f1;}
#explainBody input[type="checkbox"]{accent-color:#7424ac;width:18px;height:18px;}
#explainBody .notif-slider{height:6px;border-radius:999px;background:#2c2b33;}
#explainBody .notif-slider::-webkit-slider-thumb{width:18px;height:18px;border-radius:50%;background:#7424ac;border:1px solid rgba(116,36,172,.75);box-shadow:0 0 0 4px rgba(116,36,172,.22);}

/* Force bell/watch to share IDENTICAL pressed glass look */
.iconbtn#nav-bell.active,
.iconbtn#nav-watch.active{
  color:#fff !important;
  background:
    radial-gradient(120% 120% at 50% -10%, rgba(116,36,172,0.30) 0%, rgba(116,36,172,0.10) 45%, rgba(0,0,0,0.0) 60%),
    linear-gradient(180deg, rgba(116,36,172,0.22) 0%, rgba(116,36,172,0.10) 100%) !important;
  border:1px solid rgba(116,36,172,0.70) !important;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    inset 0 -1px 0 rgba(0,0,0,0.35),
    0 6px 18px rgba(116,36,172,0.35) !important;
}
.iconbtn#nav-bell.active i,
.iconbtn#nav-watch.active i{ color:#fff !important; }

/* ===== Mobile polish (cosmetics only; no JS or proxy changes) ===== */
@media (max-width: 520px){
  :root{
    --chip-font: 12.5px;
    --chip-pad-y: 6px;
    --chip-pad-x: 10px;
    --btn-h: 44px;
    --radius: 12px;
  }
  /* Top bar spacing */
  .header, #topbar, .appbar{ padding-left: 8px; padding-right: 8px; }
  /* Icon buttons */
  .iconbtn, .icon-btn, .btn.icon, .header .btn{
    width: 44px; height: 44px; border-radius: 14px;
  }
  .iconbtn i, .icon-btn i, .btn.icon i{ font-size: 18px; }
  /* Stat chips row */
  .statstrip{ padding: 8px 10px 0; gap: 8px; }
  .statstrip .chip, .statstrip .pill{
    font-size: var(--chip-font);
    padding: var(--chip-pad-y) var(--chip-pad-x);
    border-radius: var(--radius);
    min-height: 30px;
  }
  /* Any general chips/pills */
  .chip, .pill{
    font-size: var(--chip-font);
    padding: var(--chip-pad-y) var(--chip-pad-x);
    border-radius: var(--radius);
  }
  /* Market hours pill alignment */
  #marketHours, #marketHoursChip{ margin-left: 10px; }
  /* Cards tighter */
  .card{ padding: 14px; border-radius: 16px; }
  .card h3, .card .title{ margin-bottom: 8px; }
  /* Futures list input height + font */
  select, input, textarea{ font-size: 16px; } /* avoid iOS zoom */
  /* Timeframe segmented buttons */
  .segbtn, [data-tf], [data-timeframe]{
    min-width: 64px; height: 36px; line-height: 36px;
    border-radius: 12px; font-weight: 600;
  }
  .segbtn.active, [data-tf].active, [data-timeframe].active{
    color: #fff;
    background: linear-gradient(180deg, rgba(116,36,172,.25), rgba(116,36,172,.08));
    border: 1px solid rgba(116,36,172,.65);
    box-shadow: 0 10px 28px rgba(116,36,172,.28), inset 0 1px 0 rgba(255,255,255,.06);
  }
  /* Analyze buttons sizing */
  #start, #runTrend, #runRisk{
    min-height: var(--btn-h);
    border-radius: 14px;
    font-size: 15px;
  }
  /* Quick tabs bar */
  #riskQuickTabs.card{ padding: 10px 12px; border-radius: 16px; }
  #riskQuickTabs .tabbtn{ height: 32px; border-radius: 12px; }
  #riskQuickTabs .qt-controls .qt-refresh{ max-width: 46vw; }
  /* Dropdown caret alignment */
  select.qt-refresh{ padding-right: 28px; }
  /* “Market CLOSED/OPEN” pill inside section header */
  .card h3 + .chip, .card .title + .chip{ margin-left: 10px; }
  /* Smaller legend pills */
  .legend .item{ font-size: 12px; }
  /* Slider modal buttons text size */
  #sliderConfirm .btn{ font-size: 14px; }
}
